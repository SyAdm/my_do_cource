---
- name: Step 1 - Building Project
  hosts: build
  become: yes

  tasks:
   - name: Update apt cache and install packages
      apt:
        name:
          - git
          - default-jdk
          - maven
        state: present
        update_cache: 'yes'

    - name: Clone sample Java WAR project
      git:
        repo: 'https://github.com/boxfuse/boxfuse-sample-java-war-hello.git'
        dest: /opt/boxfuse-sample
        version: master

    - name: Build project with Maven
      command: mvn -B package
      args:
        chdir: /opt/boxfuse-sample
